import{E as x}from"./el-button-CasAo9RZ.js";import{E as y,a as k,b as E,c as d}from"./request-CoS7VfFU.js";import{u as F}from"./user-R25KWGKU.js";import{d as R,l as f,b3 as C,c as P,b as p,z as s,w as o,e as u,b7 as U,o as q,_ as B}from"./index-DVYItPUN.js";const I={class:"register-container"},N={class:"register-form-wrapper"},S={class:"login-link"},z=R({__name:"RegisterView",setup(M){const c=F(),t=f(),m=f(!1),r=C({username:"",email:"",password:"",confirmPassword:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(n,e,l)=>{e!==r.password?l(new Error("两次输入密码不一致")):l()},trigger:"blur"}]},_=async()=>{if(t.value)try{await t.value.validate(),m.value=!0,await c.register(r.username,r.email,r.password)?d.success("注册成功"):d.error("注册失败，请稍后重试")}catch(n){console.error("注册表单验证失败:",n),d.error("请填写完整的注册信息")}finally{m.value=!1}},b=()=>{t.value&&t.value.resetFields()};return(n,e)=>{const l=E,i=k,g=x,V=U("router-link"),v=y;return q(),P("div",I,[p("div",N,[e[8]||(e[8]=p("h2",{class:"register-title"},"注册",-1)),s(v,{ref_key:"registerFormRef",ref:t,model:r,rules:w,"label-width":"80px",class:"register-form"},{default:o(()=>[s(i,{label:"用户名",prop:"username"},{default:o(()=>[s(l,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"请输入用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),s(i,{label:"邮箱",prop:"email"},{default:o(()=>[s(l,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.email=a),placeholder:"请输入邮箱","prefix-icon":"el-icon-message",type:"email"},null,8,["modelValue"])]),_:1}),s(i,{label:"密码",prop:"password"},{default:o(()=>[s(l,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[s(l,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.confirmPassword=a),type:"password",placeholder:"请再次输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,null,{default:o(()=>[s(g,{type:"primary",onClick:_,loading:m.value,class:"register-btn"},{default:o(()=>[...e[4]||(e[4]=[u(" 注册 ",-1)])]),_:1},8,["loading"]),s(g,{onClick:b},{default:o(()=>[...e[5]||(e[5]=[u("重置",-1)])]),_:1})]),_:1}),p("div",S,[e[7]||(e[7]=u(" 已有账号？",-1)),s(V,{to:"/login"},{default:o(()=>[...e[6]||(e[6]=[u("立即登录",-1)])]),_:1})])]),_:1},8,["model"])])])}}}),G=B(z,[["__scopeId","data-v-acc47141"]]);export{G as default};
