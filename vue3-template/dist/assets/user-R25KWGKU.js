import{A as g,l as c,b_ as i,b$ as u,c0 as h}from"./index-DVYItPUN.js";import{s as l}from"./request-CoS7VfFU.js";const m=g("user",()=>{const o=c(null),s=c(!1),f=async(e,a)=>{try{const r=await l.post("/auth/login",{username:e,password:a});return r.token?(i(r.token),await n(),u.push("/"),!0):!1}catch(r){return console.error("登录失败:",r),!1}},p=async(e,a,r)=>{try{const t=await l.post("/auth/register",{username:e,email:a,password:r});return t.token?(i(t.token),await n(),u.push("/"),!0):!1}catch(t){return console.error("注册失败:",t),!1}},n=async()=>{try{const e=await l.get("/user/info");return o.value=e,s.value=!0,e}catch(e){return console.error("获取用户信息失败:",e),null}};return{userInfo:o,isLogin:s,login:f,register:p,getUserInfo:n,logout:()=>{h(),o.value=null,s.value=!1,u.push("/login")}}});export{m as u};
