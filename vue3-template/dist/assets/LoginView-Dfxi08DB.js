import{E as x}from"./el-button-CasAo9RZ.js";import{E as k,a as E,b as y,c as m}from"./request-CoS7VfFU.js";import{d as F,l as f,b3 as B,c as C,b as d,z as o,w as r,e as t,b7 as R,B as I,o as L,_ as N}from"./index-DVYItPUN.js";import{u as U}from"./user-R25KWGKU.js";const q={class:"login-container"},S={class:"login-form-wrapper"},z={class:"register-link"},M=F({__name:"LoginView",setup(T){I();const g=U(),l=f(),a=f(!1),s=B({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}]},w=async()=>{if(l.value)try{await l.value.validate(),a.value=!0,await g.login(s.username,s.password)?m.success("登录成功"):m.error("登录失败，请检查用户名和密码")}catch(n){console.error("登录表单验证失败:",n),m.error("请填写完整的登录信息")}finally{a.value=!1}},b=()=>{l.value&&l.value.resetFields()};return(n,e)=>{const p=y,i=E,c=x,v=R("router-link"),V=k;return L(),C("div",q,[d("div",S,[e[6]||(e[6]=d("h2",{class:"login-title"},"登录",-1)),o(V,{ref_key:"loginFormRef",ref:l,model:s,rules:_,"label-width":"80px",class:"login-form"},{default:r(()=>[o(i,{label:"用户名",prop:"username"},{default:r(()=>[o(p,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"请输入用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),o(i,{label:"密码",prop:"password"},{default:r(()=>[o(p,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),o(i,null,{default:r(()=>[o(c,{type:"primary",onClick:w,loading:a.value,class:"login-btn"},{default:r(()=>[...e[2]||(e[2]=[t(" 登录 ",-1)])]),_:1},8,["loading"]),o(c,{onClick:b},{default:r(()=>[...e[3]||(e[3]=[t("重置",-1)])]),_:1})]),_:1}),d("div",z,[e[5]||(e[5]=t(" 还没有账号？",-1)),o(v,{to:"/register"},{default:r(()=>[...e[4]||(e[4]=[t("立即注册",-1)])]),_:1})])]),_:1},8,["model"])])])}}}),H=N(M,[["__scopeId","data-v-b9b87bf7"]]);export{H as default};
